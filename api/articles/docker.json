{"title":"docker","uid":"4122a09df2e4f3d18921791a0dcc0507","slug":"docker","date":"2023-12-22T16:22:31.000Z","updated":"2024-05-09T02:57:39.933Z","comments":true,"path":"api/articles/docker.json","keywords":null,"cover":[],"content":"<h1 id=\"Docker\"><a href=\"#Docker\" class=\"headerlink\" title=\"Docker\"></a>Docker</h1><p>仅记录分享部分常用，更多请见<a href=\"https://docs.docker.com/get-started/overview/\" target=\"_blank\">Docker官方文档</a></p>\n<h2 id=\"docker安装\"><a href=\"#docker安装\" class=\"headerlink\" title=\"docker安装\"></a>docker安装</h2><h3 id=\"Centos-7\"><a href=\"#Centos-7\" class=\"headerlink\" title=\"Centos 7\"></a>Centos 7</h3><p>卸载docker旧版本</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">yum remove <span class=\"token function\">docker</span> docker-client docker-client-latest docker-common docker-latest docker-latest-logrotate docker-logrotate docker-selinux docker-engine-selinux docker-engine<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>安装相关工具类</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">yum <span class=\"token function\">install</span> <span class=\"token parameter variable\">-y</span> yum-utils device-mapper-persistent-data lvm2<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>配置docker仓库</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>aliyun的源</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>安装docker</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">yum <span class=\"token function\">install</span> docker-ce<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>检验docker安装成功，成功展示出版本号即成功</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> <span class=\"token parameter variable\">-v</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>启动docker</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">systemctl start <span class=\"token function\">docker</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>验证docker</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> run hello-world<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p><img src=\"/post/docker/image-20231222164608074.png\" alt=\"image-20231222164608074\"></p>\n<p>设置开机自启</p>\n<pre class=\"line-numbers language-csharp\" data-language=\"csharp\"><code class=\"language-csharp\">chkconfig docker <span class=\"token keyword\">on</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>升级docker ce</p>\n<pre class=\"line-numbers language-undefined\" data-language=\"undefined\"><code class=\"language-undefined\">yum -y upgrade<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>卸载docker ce </p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">yum remove docker-ce\n<span class=\"token function\">rm</span> <span class=\"token parameter variable\">-rf</span> /var/lib/docker<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n\n\n<p>配置163镜像与存储目录（更快速）</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">vim</span> /etc/docker/daemon.json<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>registry-mirrors 为镜像地址</p>\n<p>docker 版本&lt;20 graph 为存储目录 建议不要使用默认的 否则空间会不够用</p>\n<p>docker 版本&gt;20 graph已经弃用 需使用 data-root</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token punctuation\">&#123;</span>\n  <span class=\"token string\">\"registry-mirrors\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"http://hub-mirror.c.163.com\"</span><span class=\"token punctuation\">]</span>,\n  <span class=\"token string\">\"data-root\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"/home/docker\"</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>配置完成后重启</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">systemctl daemon-reload\nsystemctl restart <span class=\"token function\">docker</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n\n\n<h3 id=\"Windows\"><a href=\"#Windows\" class=\"headerlink\" title=\"Windows\"></a>Windows</h3><p>下载docker-desktop即可</p>\n<h2 id=\"docker-compose安装\"><a href=\"#docker-compose安装\" class=\"headerlink\" title=\"docker-compose安装\"></a>docker-compose安装</h2><h3 id=\"从github下载\"><a href=\"#从github下载\" class=\"headerlink\" title=\"从github下载\"></a>从github下载</h3><p><a href=\"https://github.com/docker/compose/releases/tag/v2.2.2\">Release v2.2.2 · docker&#x2F;compose · GitHub</a></p>\n<p>选用2.2.2版本，其他版本自行从releases中选择下载即可</p>\n<p>下载完成后，上传到 <code>/usr/local/bin</code> 中，并重命名为<code>docker-compose</code></p>\n<p>此时直接执行<code>docker-compose -v</code>会提示没有权限，需要授权</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">chmod</span> +x /usr/local/bin/docker-compose<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n\n\n<p>这个时候执行版本检查即可</p>\n<p><img src=\"/post/docker/image-20231223120216992.png\" alt=\"image-20231223120216992\"></p>\n","feature":true,"text":"Docker仅记录分享部分常用，更多请见Docker官方文档 docker安装Centos 7卸载docker旧版本 yum remove docker docker-client docker-client-latest docker-common docker-latest ...","link":"","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"docker","slug":"docker","count":1,"path":"api/tags/docker.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Docker\"><span class=\"toc-text\">Docker</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#docker%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">docker安装</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Centos-7\"><span class=\"toc-text\">Centos 7</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Windows\"><span class=\"toc-text\">Windows</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#docker-compose%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">docker-compose安装</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BB%8Egithub%E4%B8%8B%E8%BD%BD\"><span class=\"toc-text\">从github下载</span></a></li></ol></li></ol></li></ol>","author":{"name":"Peilin","slug":"blog-author","avatar":"https://www.z4a.net/images/2023/06/23/image-20230622235021158.png","link":"/","description":"Life Oriented Programming","socials":{"github":"https://github.com/wupeilindotme","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{},"next_post":{"title":"uniapp-start","uid":"5db5c650ba4543d20cdc6decfa5600e8","slug":"uniapp-start","date":"2023-12-21T19:11:38.000Z","updated":"2024-05-09T02:57:39.941Z","comments":true,"path":"api/articles/uniapp-start.json","keywords":null,"cover":[],"text":"Uni-app简介： 可以跨平台， 一套代码，多端发行。 作为一个跨平台解决方案。 技术栈：vue.js 有非常好的生态： 支持通过npm安装第三方包 支持微信小程序SDK dcloud插件市场 ","link":"","photos":[],"count_time":{"symbolsCount":102,"symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"移动端","slug":"移动端","count":1,"path":"api/tags/移动端.json"}],"author":{"name":"Peilin","slug":"blog-author","avatar":"https://www.z4a.net/images/2023/06/23/image-20230622235021158.png","link":"/","description":"Life Oriented Programming","socials":{"github":"https://github.com/wupeilindotme","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true}}